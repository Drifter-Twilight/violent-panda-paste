import{d as N,G as J,n as I,J as i,q as L,K as Q,L as $,M as Y,o as H,c as M,w as q,N as Z,b as A,x as T,e as m,y as O,O as ee,T as te,A as W,P as le,k as F,a as j,F as ae,H as E,Q as D,R as se,U,v as oe,j as re,V as ne,W as ie,r as ce,z as ue,X as ve,I as fe,B as me}from"./index.c147132e.js";import{b as X,d as de,a as K}from"./runtime.771aef88.js";import{t as he}from"./error.7e8331f1.js";const G=Symbol("scrollbarContextKey"),S=4,pe={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}},be=({move:h,size:c,bar:r})=>({[r.size]:c,transform:`translate${r.axis}(${h}%)`}),ye=X({vertical:Boolean,size:String,move:Number,ratio:{type:Number,required:!0},always:Boolean}),ge="Thumb",we=N({__name:"thumb",props:ye,setup(h){const c=h,r=J(G),s=I("scrollbar");r||he(ge,"can not inject scrollbar context");const n=i(),v=i(),o=i({}),d=i(!1);let l=!1,y=!1,g=le?document.onselectstart:null;const t=L(()=>pe[c.vertical?"vertical":"horizontal"]),z=L(()=>be({size:c.size,move:c.move,bar:t.value})),_=L(()=>n.value[t.value.offset]**2/r.wrapElement[t.value.scrollSize]/c.ratio/v.value[t.value.offset]),B=a=>{var u;if(a.stopPropagation(),a.ctrlKey||[1,2].includes(a.button))return;(u=window.getSelection())==null||u.removeAllRanges(),C(a);const f=a.currentTarget;!f||(o.value[t.value.axis]=f[t.value.offset]-(a[t.value.client]-f.getBoundingClientRect()[t.value.direction]))},x=a=>{if(!v.value||!n.value||!r.wrapElement)return;const u=Math.abs(a.target.getBoundingClientRect()[t.value.direction]-a[t.value.client]),f=v.value[t.value.offset]/2,b=(u-f)*100*_.value/n.value[t.value.offset];r.wrapElement[t.value.scroll]=b*r.wrapElement[t.value.scrollSize]/100},C=a=>{a.stopImmediatePropagation(),l=!0,document.addEventListener("mousemove",P),document.addEventListener("mouseup",k),g=document.onselectstart,document.onselectstart=()=>!1},P=a=>{if(!n.value||!v.value||l===!1)return;const u=o.value[t.value.axis];if(!u)return;const f=(n.value.getBoundingClientRect()[t.value.direction]-a[t.value.client])*-1,b=v.value[t.value.offset]-u,w=(f-b)*100*_.value/n.value[t.value.offset];r.wrapElement[t.value.scroll]=w*r.wrapElement[t.value.scrollSize]/100},k=()=>{l=!1,o.value[t.value.axis]=0,document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",k),e(),y&&(d.value=!1)},R=()=>{y=!1,d.value=!!c.size},p=()=>{y=!0,d.value=l};Q(()=>{e(),document.removeEventListener("mouseup",k)});const e=()=>{document.onselectstart!==g&&(document.onselectstart=g)};return $(Y(r,"scrollbarElement"),"mousemove",R),$(Y(r,"scrollbarElement"),"mouseleave",p),(a,u)=>(H(),M(te,{name:m(s).b("fade"),persisted:""},{default:q(()=>[Z(A("div",{ref_key:"instance",ref:n,class:T([m(s).e("bar"),m(s).is(m(t).key)]),onMousedown:x},[A("div",{ref_key:"thumb",ref:v,class:T(m(s).e("thumb")),style:O(m(z)),onMousedown:B},null,38)],34),[[ee,a.always||d.value]])]),_:1},8,["name"]))}});var V=W(we,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/thumb.vue"]]);const Se=X({always:{type:Boolean,default:!0},width:String,height:String,ratioX:{type:Number,default:1},ratioY:{type:Number,default:1}}),ze=N({__name:"bar",props:Se,setup(h,{expose:c}){const r=h,s=i(0),n=i(0);return c({handleScroll:o=>{if(o){const d=o.offsetHeight-S,l=o.offsetWidth-S;n.value=o.scrollTop*100/d*r.ratioY,s.value=o.scrollLeft*100/l*r.ratioX}}}),(o,d)=>(H(),F(ae,null,[j(V,{move:s.value,ratio:o.ratioX,size:o.width,always:o.always},null,8,["move","ratio","size","always"]),j(V,{move:n.value,ratio:o.ratioY,size:o.height,vertical:"",always:o.always},null,8,["move","ratio","size","always"])],64))}});var _e=W(ze,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/bar.vue"]]);const ke=X({height:{type:[String,Number],default:""},maxHeight:{type:[String,Number],default:""},native:Boolean,wrapStyle:{type:de([String,Object,Array]),default:""},wrapClass:{type:[String,Array],default:""},viewClass:{type:[String,Array],default:""},viewStyle:{type:[String,Array,Object],default:""},noresize:Boolean,tag:{type:String,default:"div"},always:Boolean,minSize:{type:Number,default:20}}),Ee={scroll:({scrollTop:h,scrollLeft:c})=>[h,c].every(E)},He=N({name:"ElScrollbar"}),Te=N({...He,props:ke,emits:Ee,setup(h,{expose:c,emit:r}){const s=h,n=I("scrollbar");let v,o;const d=i(),l=i(),y=i(),g=i("0"),t=i("0"),z=i(),_=i(1),B=i(1),x=L(()=>{const e={};return s.height&&(e.height=K(s.height)),s.maxHeight&&(e.maxHeight=K(s.maxHeight)),[s.wrapStyle,e]}),C=()=>{var e;l.value&&((e=z.value)==null||e.handleScroll(l.value),r("scroll",{scrollTop:l.value.scrollTop,scrollLeft:l.value.scrollLeft}))};function P(e,a){fe(e)?l.value.scrollTo(e):E(e)&&E(a)&&l.value.scrollTo(e,a)}const k=e=>{!E(e)||(l.value.scrollTop=e)},R=e=>{!E(e)||(l.value.scrollLeft=e)},p=()=>{if(!l.value)return;const e=l.value.offsetHeight-S,a=l.value.offsetWidth-S,u=e**2/l.value.scrollHeight,f=a**2/l.value.scrollWidth,b=Math.max(u,s.minSize),w=Math.max(f,s.minSize);_.value=u/(e-u)/(b/(e-b)),B.value=f/(a-f)/(w/(a-w)),t.value=b+S<e?`${b}px`:"",g.value=w+S<a?`${w}px`:""};return D(()=>s.noresize,e=>{e?(v==null||v(),o==null||o()):({stop:v}=se(y,p),o=$("resize",p))},{immediate:!0}),D(()=>[s.maxHeight,s.height],()=>{s.native||U(()=>{var e;p(),l.value&&((e=z.value)==null||e.handleScroll(l.value))})}),oe(G,re({scrollbarElement:d,wrapElement:l})),ne(()=>{s.native||U(()=>{p()})}),ie(()=>p()),c({wrap$:l,update:p,scrollTo:P,setScrollTop:k,setScrollLeft:R,handleScroll:C}),(e,a)=>(H(),F("div",{ref_key:"scrollbar$",ref:d,class:T(m(n).b())},[A("div",{ref_key:"wrap$",ref:l,class:T([e.wrapClass,m(n).e("wrap"),{[m(n).em("wrap","hidden-default")]:!e.native}]),style:O(m(x)),onScroll:C},[(H(),M(ue(e.tag),{ref_key:"resize$",ref:y,class:T([m(n).e("view"),e.viewClass]),style:O(e.viewStyle)},{default:q(()=>[ce(e.$slots,"default")]),_:3},8,["class","style"]))],38),e.native?ve("v-if",!0):(H(),M(_e,{key:0,ref_key:"barRef",ref:z,height:t.value,width:g.value,always:e.always,"ratio-x":B.value,"ratio-y":_.value},null,8,["height","width","always","ratio-x","ratio-y"]))],2))}});var Be=W(Te,[["__file","/home/runner/work/element-plus/element-plus/packages/components/scrollbar/src/scrollbar.vue"]]);const Ne=me(Be);export{Ne as E};
